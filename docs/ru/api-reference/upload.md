# Upload

```js
const { upload } = vk;
```

Для каждой загрузки файлов присутствует несколько общих свойств

| Свойство  | Тип     | Описание                                |
|-----------|---------|-----------------------------------------|
| source    | Mixed   | Источник для загрузки                   |
| timeout   | number  | Время ожидания загрузки (необязательно) |
| uploadUrl | string  | Адрес загрузки сервера (необязательно)  |

Свойство `source` поддерживает несколько типов источников
- Путь к файлу
- `URL`
- `Buffer`
- `Stream`

Если имеется необходимость указать вручную `MIME-Type` или название файла, можно воспользоваться следующей конструкцией

```js
source: {
	value: <source>,
	filename: 'file.jpg',
	contentType: 'image/jpeg'
}
```

Так же стоит заметить что параметры могут содержать данные для получения сервера так и для сохранения загруженных файлов. Это упрощает работу с параметрами загрузки

## photoAlbum
Загрузка фотографий в альбом, в source можно передать массив до 5 файлов

```js
upload.photoAlbum(params); // => Promise<PhotoAttachment[]>
```

| Параметр | Тип    | Описание           |
|----------|--------|--------------------|
| params   | Object | Параметры загрузки |

Список параметров

| Свойство  | Тип     | Описание                                                     |
|-----------|---------|--------------------------------------------------------------|
| source    | Mixed[] | Источник для загрузки                                        |
| album_id  | number  | Идентификатор альбома                                        |
| group_id  | number  | Идентификатор сообщества                                     |
| caption   | string  | Текст описания фотографии (максимум 2048 символов)           |
| latitude  | float   | Географическая широта, заданная в градусах (от -90 до 90)    |
| longitude | float   | Географическая долгота, заданная в градусах (от -180 до 180) |

## wallPhoto
Загрузка фотографию на стенку пользователя или сообщества

```js
upload.wallPhoto(params); // => Promise<PhotoAttachment>
```

| Параметр | Тип    | Описание           |
|----------|--------|--------------------|
| params   | Object | Параметры загрузки |

Список параметров

| Свойство  | Тип     | Описание                                                                 |
|-----------|---------|--------------------------------------------------------------------------|
| group_id  | number  | Идентификатор сообщества, на стену которого нужно сохранить фотографию   |
| user_id   | number  | Идентификатор пользователя, на стену которого нужно сохранить фотографию |
| caption   | string  | Текст описания фотографии (максимум 2048 символов)                       |
| latitude  | float   | Географическая широта, заданная в градусах (от -90 до 90)                |
| longitude | float   | Географическая долгота, заданная в градусах (от -180 до 180)             |

## ownerPhoto
Загрузка основной фотографии пользователя или сообщества

```js
upload.ownerPhoto(params); // => Promise<Object>
```

| Параметр | Тип    | Описание           |
|----------|--------|--------------------|
| params   | Object | Параметры загрузки |

Список параметров

| Свойство | Тип    | Описание                                           |
|----------|--------|----------------------------------------------------|
| owner_id | number | Идентификатор сообщества или текущего пользователя |

## messagePhoto
Загрузка фотографии в личное сообщение

```js
upload.messagePhoto(params); // => Promise<PhotoAttachment>
```

| Параметр | Тип    | Описание           |
|----------|--------|--------------------|
| params   | Object | Параметры загрузки |

Список параметров

| Свойство | Тип    | Описание                                                                  |
|----------|--------|---------------------------------------------------------------------------|
| peer_id  | number | Идентификатор назначения (для загрузки фотографии в сообщениях сообществ) |

## chatPhoto
Загрузка основной фотографии для чата

```js
upload.chatPhoto(params); // => Promise<Object>
```

| Параметр | Тип    | Описание           |
|----------|--------|--------------------|
| params   | Object | Параметры загрузки |

Список параметров

| Свойство   | Тип    | Описание                                                        |
|------------|--------|-----------------------------------------------------------------|
| chat_id    | number | Идентификатор беседы, для которой нужно загрузить фотографию    |
| crop_x     | number | Координата X верхнего правого угла для обрезки фотографии       |
| crop_y     | number | Координата Y верхнего правого угла для обрезки фотографии       |
| crop_width | number | Ширина фотографии после обрезки в px (минимальное значение 200) |

## marketPhoto
Загрузка фотографии для товара

```js
upload.marketPhoto(params); // => Promise<PhotoAttachment>
```

| Параметр | Тип    | Описание           |
|----------|--------|--------------------|
| params   | Object | Параметры загрузки |

Список параметров

| Свойство   | Тип    | Описание                                                                      |
|------------|--------|-------------------------------------------------------------------------------|
| group_id   | number | Идентификатор сообщества, для которого необходимо загрузить фотографию товара |
| main_photo | number | 1 — является ли фотография обложкой товара                                    |
| crop_x     | number | Координата X верхнего правого угла для обрезки фотографии                     |
| crop_y     | number | Координата Y верхнего правого угла для обрезки фотографии                     |
| crop_width | number | Ширина фотографии после обрезки в px (минимальное значение 400)               |

## marketAlbumPhoto
Загрузка фотографии для выбора товаров

```js
upload.marketAlbumPhoto(params); // => Promise<PhotoAttachment>
```

| Параметр | Тип    | Описание           |
|----------|--------|--------------------|
| params   | Object | Параметры загрузки |

Список параметров

| Свойство | Тип    | Описание                                                                                |
|----------|--------|-----------------------------------------------------------------------------------------|
| group_id | number | Идентификатор сообщества, для которого необходимо загрузить фотографию подборки товаров |

## audio
Загрузка аудио

```js
upload.audio(params); // => Promise<AudioAttachment>
```

| Параметр | Тип    | Описание           |
|----------|--------|--------------------|
| params   | Object | Параметры загрузки |

Список параметров

| Свойство | Тип    | Описание                                               |
|----------|--------|--------------------------------------------------------|
| title    | string | Название композиции. По умолчанию берется из ID3 тегов |
| artist   | string | Автор композиции. По умолчанию берется из ID3 тегов    |

## video
Загрузка видео

```js
upload.video(params); // => Promise<VideoAttachment>
```

| Параметр | Тип    | Описание           |
|----------|--------|--------------------|
| params   | Object | Параметры загрузки |

Список параметров

| Свойство        | Тип    | Описание                                                                                                                      |
|-----------------|--------|-------------------------------------------------------------------------------------------------------------------------------|
| group_id        | number | Идентификатор сообщества, в которое будет сохранен видеофайл. По умолчанию файл сохраняется на страницу текущего пользователя |
| album_id        | number | Идентификатор альбома, в который будет загружен видео файл.                                                                   |
| name            | string | Название видео файла                                                                                                          |
| description     | string | Описание видео файла                                                                                                          |
| link            | string | URL для встраивания видео с внешнего сайта, например, с Youtube                                                               |
| privacy_view    | string | Настройки приватности просмотра видеозаписи в [специальном формате](https://vk.com/dev/objects/privacy)                       |
| privacy_comment | string | Настройки приватности комментирования видеозаписи в [специальном формате](https://vk.com/dev/objects/privacy)                 |
| is_private      | number | 1 — если видео загружается для отправки личным сообщением                                                                     |
| wallpost        | number | 1 — требуется ли после сохранения опубликовать запись с видео на стене                                                        |
| no_comments     | number | 1 — закрыть комментарии (для видео из сообществ)                                                                              |
| repeat          | number | 1 — зацикливать воспроизведения видеозаписи                                                                                   |

## doc
Загрузка документа

```js
upload.doc(params); // => Promise<DocumentAttachment>
```

| Параметр | Тип    | Описание           |
|----------|--------|--------------------|
| params   | Object | Параметры загрузки |

Список параметров

| Свойство | Тип    | Описание                               |
|----------|--------|----------------------------------------|
| group_id | number | Идентификатор сообщества               |
| type     | number | Тип документа (audio_message|graffiti) |
| title    | string | Название документа                     |
| tags     | string | Метки для поиска                       |

## wallDoc
Загрузка документа на стену

```js
upload.wallDoc(params); // => Promise<DocumentAttachment>
```

| Параметр | Тип    | Описание           |
|----------|--------|--------------------|
| params   | Object | Параметры загрузки |

Список параметров

| Свойство | Тип    | Описание                               |
|----------|--------|----------------------------------------|
| group_id | number | Идентификатор сообщества               |
| type     | number | Тип документа (audio_message|graffiti) |
| title    | string | Название документа                     |
| tags     | string | Метки для поиска                       |

## messageDoc
Загрузка документа в сообщение

```js
upload.messageDoc(params); // => Promise<DocumentAttachment>
```

| Параметр | Тип    | Описание           |
|----------|--------|--------------------|
| params   | Object | Параметры загрузки |

Список параметров

| Свойство | Тип    | Описание                          |
|----------|--------|-----------------------------------|
| peer_id  | number | Идентификатор назначения          |
| type     | number | Тип документа (doc|audio_message) |
| title    | string | Название документа                |
| tags     | string | Метки для поиска                  |

## voice
Загрузка аудио сообщения

```js
upload.voice(params); // => Promise<DocumentAttachment>
```

| Параметр | Тип    | Описание           |
|----------|--------|--------------------|
| params   | Object | Параметры загрузки |

Список параметров

| Свойство | Тип    | Описание                          |
|----------|--------|-----------------------------------|
| peer_id  | number | Идентификатор назначения          |

## graffiti
Загрузка граффити

```js
upload.graffiti(params); // => Promise<DocumentAttachment>
```

| Параметр | Тип    | Описание           |
|----------|--------|--------------------|
| params   | Object | Параметры загрузки |

Список параметров

| Свойство | Тип    | Описание                               |
|----------|--------|----------------------------------------|
| group_id | number | Идентификатор сообщества               |
| title    | string | Название документа                     |
| tags     | string | Метки для поиска                       |

## groupCover
Загрузка обложки сообщества

```js
upload.groupCover(params); // => Promise<Object>
```

| Параметр | Тип    | Описание           |
|----------|--------|--------------------|
| params   | Object | Параметры загрузки |

Список параметров

| Свойство | Тип    | Описание                                                  |
|----------|--------|-----------------------------------------------------------|
| group_id | number | Идентификатор сообщества                                  |
| crop_x   | number | Координата X верхнего левого угла для обрезки изображения |
| crop_y   | number | Координата Y верхнего левого угла для обрезки изображения |
| crop_x2  | number | Координата X нижнего правого угла для обрезки изображения |
| crop_y2  | number | Координата Y нижнего правого угла для обрезки изображения |
